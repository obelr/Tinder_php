# Nixpacks Configuration for Laravel
# Railway will auto-detect PHP and Composer from composer.json
# Skip npm build phase (not needed for Laravel backend)

[phases.install]
cmds = ["composer install --no-dev --optimize-autoloader --no-interaction --prefer-dist"]

[phases.build]
cmds = [
  "php artisan config:clear",
  "php artisan cache:clear",
  "php artisan l5-swagger:generate",
  "php scripts/fix-swagger-json.php"
]

[start]
cmd = "php artisan serve --host=0.0.0.0 --port=$PORT"
